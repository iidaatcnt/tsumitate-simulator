# 投資複利計算アプリ 仕様書

## 1. アプリ概要

### 1.1 目的
毎月定額を積み立てた場合の、複利運用による最終積立金額を計算・表示するシミュレーションアプリ

### 1.2 ターゲットユーザー
- 投資初心者
- 長期積立投資を検討している人
- 資産形成の計画を立てたい人

---

## 2. 機能要件

### 2.1 入力機能
以下の3つのパラメータを入力できること：

1. **毎月の積立金額**
   - 入力形式：数値入力フィールド
   - 単位：万円
   - 初期値：5
   - 制約：正の数値のみ
   - 推奨範囲：0.1〜100万円

2. **想定利回り（年率）**
   - 入力形式：数値入力フィールド
   - 単位：%（パーセント）
   - 初期値：7
   - 制約：0以上の数値
   - 推奨範囲：0〜20%

3. **積立期間**
   - 入力形式：ドロップダウンメニュー
   - 単位：年
   - 初期値：20年
   - 選択肢：1年、2年、3年...50年（1年刻み）

### 2.2 計算機能

#### 計算式
複利計算の標準的な式を使用：

```
最終積立金額 = 毎月積立額 × {[(1 + r)^n - 1] / r}

ここで：
- r = 年利率 / 12（月利）
- n = 積立期間（年） × 12（総月数）
```

#### 計算トリガー
- 「計算する」ボタンをクリックした時

#### 計算結果
- 最終積立金額を円単位で表示
- 3桁ごとにカンマ区切りで表示（例：26,046,333円）

### 2.3 表示機能

#### ヘッダー表示
- タイトル：「毎月○万円を年利○%で○年間運用すると...」
- 入力値に応じて動的に更新

#### 結果表示
- 「最終積立金額」というラベル
- 計算結果を大きく目立つように表示
- 赤枠または強調表示で視覚的に目立たせる

---

## 3. UI/UX要件

### 3.1 レイアウト構成

```
┌─────────────────────────────────────┐
│  タイトル（軽めのキャッチコピー）        │
├─────────────────────────────────────┤
│  毎月○万円を年利○%で○年間運用すると... │
├─────────────────────────────────────┤
│                                     │
│  毎月の積立金額    想定利回り(年率)   積立期間│
│  [5      ]万円   [7        ]%    [20年 ▼]│
│                                     │
│           [  計算する  ]             │
│                                     │
│  ┌───────────────────────────┐      │
│  │最終積立金額  26,046,333円 │      │
│  └───────────────────────────┘      │
│                                     │
└─────────────────────────────────────┘
```

### 3.2 カラースキーム
- 背景：明るい色（ライトグリーン、ベージュなど）
- 入力フィールド：白
- 計算ボタン：緑系の目立つ色
- 結果表示枠：赤または暖色系の枠線で強調
- テキスト：濃いグレーまたは黒

### 3.3 フォント
- 見出し：大きめ（24-32px）、太字
- 入力ラベル：中サイズ（16-18px）
- 入力値：中サイズ（18-20px）
- 結果：非常に大きく（28-36px）、太字

### 3.4 レスポンシブ対応
- スマートフォン、タブレット、PCで適切に表示
- 縦向き・横向き両対応

---

## 4. 技術要件

### 4.1 推奨技術スタック

**フロントエンド**
- HTML5
- CSS3（またはTailwind CSS）
- JavaScript（Vanilla JSまたはReact）

**計算ロジック**
- JavaScriptによるクライアント側での計算
- サーバー不要の静的アプリとして実装可能

### 4.2 ブラウザ対応
- Chrome（最新版）
- Safari（最新版）
- Firefox（最新版）
- Edge（最新版）

---

## 5. 入力バリデーション

### 5.1 必須チェック
- 全ての入力フィールドに値が入っていること
- 空欄の場合はエラーメッセージを表示

### 5.2 形式チェック
- 数値フィールドは数値のみ入力可能
- 負の数は入力不可

### 5.3 範囲チェック
- 毎月積立額：0円超
- 年利：0%以上（負の利率は理論上あり得るが、現実的でないため制限）
- 積立期間：1年以上

### 5.4 エラー表示
- 入力欄の近くに赤文字でエラーメッセージ
- 例：「正の数値を入力してください」

---

## 6. 追加機能（オプション）

### 6.1 グラフ表示
- 積立額の推移をグラフで可視化
- 元本と運用益を色分けして表示

### 6.2 詳細内訳
- 総投資額（元本）
- 運用益
- 利回りによる増加額

### 6.3 シナリオ比較
- 複数の条件を並べて比較表示
- 例：年利5%、7%、10%の比較

### 6.4 CSV出力
- 計算結果をCSVファイルでダウンロード

### 6.5 印刷機能
- 計算結果を印刷用に最適化して出力

---

## 7. 計算例

### 入力値
- 毎月の積立金額：5万円
- 想定利回り：7%（年率）
- 積立期間：20年

### 計算過程
```
月利 r = 7% / 12 = 0.005833...
総月数 n = 20年 × 12 = 240ヶ月
毎月積立額 = 50,000円

最終積立金額 = 50,000 × {[(1.005833)^240 - 1] / 0.005833}
            = 50,000 × {[4.0066 - 1] / 0.005833}
            = 50,000 × 520.927
            = 26,046,333円
```

### 出力結果
**最終積立金額：26,046,333円**

---

## 8. 注意事項・免責事項

### 8.1 表示すべき注意書き
以下の注意事項をアプリ内に明記すること：

- 「この計算はシミュレーションであり、実際の運用結果を保証するものではありません」
- 「投資には元本割れのリスクがあります」
- 「税金や手数料は考慮されていません」
- 「実際の投資判断は専門家にご相談ください」

---

## 9. テストケース

### 9.1 基本計算テスト
| 毎月積立額 | 年利 | 期間 | 期待結果（概算） |
|-----------|------|------|-----------------|
| 5万円 | 7% | 20年 | 26,046,333円 |
| 3万円 | 5% | 30年 | 24,967,104円 |
| 10万円 | 10% | 10年 | 20,484,496円 |

### 9.2 エッジケーステスト
- 年利0%の場合：元本のみ（積立額×12×期間）
- 最小値：1万円、1%、1年
- 最大値：100万円、20%、50年

### 9.3 エラーケーステスト
- 空欄での計算試行
- 負の数値の入力
- 文字列の入力

---

## 10. 開発スケジュール案

### Phase 1: 基本機能（1-2週間）
- UI設計・実装
- 計算ロジック実装
- 基本的な入力バリデーション

### Phase 2: 改善・テスト（1週間）
- デザイン調整
- レスポンシブ対応
- テスト・デバッグ

### Phase 3: 追加機能（オプション、1-2週間）
- グラフ表示
- 詳細内訳
- その他の拡張機能

---

## 11. 成功指標（KPI）

- ユーザビリティ：初回訪問者が30秒以内に計算を完了できる
- エラー率：入力エラーが5%以下
- 計算精度：既存の投資計算ツールと±0.1%以内の誤差

---

## 付録：参考情報

### 複利計算の数学的背景
積立投資における将来価値（FV）の計算式：

```
FV = PMT × [(1 + r)^n - 1] / r

FV: Future Value（将来価値）
PMT: Payment（定期的な支払額）
r: 期間利率
n: 期間数
```

この式は、等比数列の和の公式から導出されます。

---

**文書バージョン：1.0**  
**作成日：2025年10月7日**  
**最終更新日：2025年10月7日**
